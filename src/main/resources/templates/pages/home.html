<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/base}"
      lang="id">
<head>
    <title>Dashboard - Plant Care</title>
</head>
<body>

    <div layout:fragment="content">
        
        <!-- 1. HERO SECTION (Banner Utama) -->
        <div class="row mb-5 fade-in">
            <div class="col-12">
                <!-- Background Gradient Premium -->
                <div class="card border-0 shadow-lg rounded-5 overflow-hidden position-relative text-white" 
                     style="min-height: 280px; background: linear-gradient(135deg, #0ba360 0%, #3cba92 100%);">
                    
                    <!-- Dekorasi Background -->
                    <div class="position-absolute top-0 start-0 w-100 h-100" style="z-index: 0; pointer-events: none;">
                        <i class="fas fa-seedling position-absolute text-white" 
                           style="font-size: 20rem; left: -5rem; bottom: -8rem; opacity: 0.1; transform: rotate(20deg);"></i>
                        <div class="position-absolute bg-white rounded-circle opacity-10" 
                             style="width: 250px; height: 250px; top: -100px; right: 20%;"></div>
                        <div class="position-absolute bg-warning rounded-circle opacity-10" 
                             style="width: 80px; height: 80px; bottom: 40px; left: 40%;"></div>
                    </div>

                    <!-- KONTEN UTAMA -->
                    <div class="card-body p-4 p-lg-5 d-flex flex-column flex-md-row align-items-center justify-content-between position-relative" 
                         style="z-index: 2;">
                        
                        <!-- KIRI: Sapaan Personal -->
                        <div class="text-center text-md-start mb-4 mb-md-0">
                            <!-- Badge Kreatif (Ganti Lokasi) -->
                            <div class="d-inline-flex align-items-center bg-white bg-opacity-20 rounded-pill px-3 py-1 mb-3 backdrop-blur border border-white border-opacity-25 shadow-sm">
                                <i class="fas fa-rocket me-2 text-warning drop-shadow"></i>
                                <span class="fw-bold letter-spacing-1 small text-white">GROWING TOGETHER</span>
                            </div>
                            
                            <!-- Sapaan Dinamis -->
                            <h1 class="display-5 fw-bold mb-2 text-shadow">
                                <span id="greetingTime">Halo</span>, <span th:text="${auth.name}">User</span>! ðŸ‘‹
                            </h1>
                            
                            <!-- Quote -->
                            <p class="lead mb-0 opacity-90 fw-light" id="dailyQuote">
                                Rawat tanamanmu hari ini, panen kebahagiaan esok hari.
                            </p>
                        </div>

                        <!-- KANAN: CREATOR CARD (Instagram Link) -->
                        <div class="glass-card text-center p-4 shadow-lg" style="transform: rotate(-3deg);">
                            <div class="mb-2 position-relative d-inline-block">
                                <!-- Icon Instagram Besar -->
                                <i class="fab fa-instagram fa-3x text-white drop-shadow"></i>
                                <span class="position-absolute top-0 start-100 translate-middle p-1 bg-warning border border-light rounded-circle">
                                    <span class="visually-hidden">New alerts</span>
                                </span>
                            </div>
                            
                            <h5 class="fw-bold mb-0 mt-2">Dimas Sidabutar</h5>
                            <small class="d-block opacity-75 mb-3">@dimassdbtr</small>
                            
                            <a href="https://instagram.com/dimassdbtr" target="_blank" 
                               class="btn btn-light btn-sm rounded-pill px-4 fw-bold text-success shadow-sm hover-scale">
                                <i class="fas fa-plus me-1"></i> Follow Owner
                            </a>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <!-- 2. MENU GRID -->
        <div class="row g-4 mb-5 fade-in" style="animation-delay: 0.1s;">
            <div class="col-6 col-md-3">
                <a th:href="@{/plants}" class="card h-100 border-0 shadow-sm rounded-4 text-decoration-none hover-lift">
                    <div class="card-body text-center p-4">
                        <div class="icon-box bg-success-subtle text-success mb-3 mx-auto shadow-sm"><i class="fas fa-leaf fa-2x"></i></div>
                        <h6 class="fw-bold text-dark mb-1">Kebunku</h6>
                        <small class="text-muted">Koleksi</small>
                    </div>
                </a>
            </div>
            <div class="col-6 col-md-3">
                <a th:href="@{/schedule}" class="card h-100 border-0 shadow-sm rounded-4 text-decoration-none hover-lift">
                    <div class="card-body text-center p-4">
                        <div class="icon-box bg-info-subtle text-info mb-3 mx-auto shadow-sm"><i class="fas fa-calendar-check fa-2x"></i></div>
                        <h6 class="fw-bold text-dark mb-1">Jadwal</h6>
                        <small class="text-muted">Agenda</small>
                    </div>
                </a>
            </div>
            <div class="col-6 col-md-3">
                <a th:href="@{/doctor}" class="card h-100 border-0 shadow-sm rounded-4 text-decoration-none hover-lift">
                    <div class="card-body text-center p-4">
                        <div class="icon-box bg-danger-subtle text-danger mb-3 mx-auto shadow-sm"><i class="fas fa-heartbeat fa-2x"></i></div>
                        <h6 class="fw-bold text-dark mb-1">Dokter</h6>
                        <small class="text-muted">Diagnosa</small>
                    </div>
                </a>
            </div>
            <div class="col-6 col-md-3">
                <a th:href="@{/encyclopedia}" class="card h-100 border-0 shadow-sm rounded-4 text-decoration-none hover-lift">
                    <div class="card-body text-center p-4">
                        <div class="icon-box bg-warning-subtle text-warning mb-3 mx-auto shadow-sm"><i class="fas fa-lightbulb fa-2x"></i></div>
                        <h6 class="fw-bold text-dark mb-1">Tips</h6>
                        <small class="text-muted">Info</small>
                    </div>
                </a>
            </div>
        </div>

        <!-- 3. STATISTICS SECTION -->
        <div class="row g-4 mb-5 fade-in" style="animation-delay: 0.2s;">
            <div class="col-lg-8">
                <div class="card border-0 shadow-sm rounded-4 h-100">
                    <div class="card-header bg-white border-0 pt-4 px-4 d-flex justify-content-between align-items-center">
                        <h5 class="fw-bold text-dark mb-0"><i class="fas fa-chart-line me-2 text-success"></i>Statistik Kebun</h5>
                        <span class="badge bg-light text-muted border">Realtime</span>
                    </div>
                    <div class="card-body p-4">
                        <!-- Progress 1 -->
                        <div class="mb-4">
                            <div class="d-flex justify-content-between mb-1">
                                <span class="fw-bold small text-secondary">Kesehatan Tanaman</span>
                                <span class="fw-bold small text-success" th:text="${healthStat} + '%'">0%</span>
                            </div>
                            <div class="progress rounded-pill bg-success bg-opacity-10" style="height: 8px;">
                                <div class="progress-bar bg-success" role="progressbar" th:style="'width: ' + ${healthStat} + '%'"></div>
                            </div>
                        </div>
                        <!-- Progress 2 -->
                        <div class="mb-4">
                            <div class="d-flex justify-content-between mb-1">
                                <span class="fw-bold small text-secondary">Ketersediaan Air</span>
                                <span class="fw-bold small text-info" th:text="${waterStat} + '%'">0%</span>
                            </div>
                            <div class="progress rounded-pill bg-info bg-opacity-10" style="height: 8px;">
                                <div class="progress-bar bg-info" role="progressbar" th:style="'width: ' + ${waterStat} + '%'"></div>
                            </div>
                        </div>
                        <!-- Progress 3 -->
                        <div>
                            <div class="d-flex justify-content-between mb-1">
                                <span class="fw-bold small text-secondary">Jadwal Tuntas</span>
                                <span class="fw-bold small text-warning" th:text="${scheduleStat} + '%'">0%</span>
                            </div>
                            <div class="progress rounded-pill bg-warning bg-opacity-10" style="height: 8px;">
                                <div class="progress-bar bg-warning" role="progressbar" th:style="'width: ' + ${scheduleStat} + '%'"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Kanan: Fun Fact -->
            <div class="col-lg-4">
                <div class="card border-0 shadow-sm rounded-4 h-100 bg-light">
                    <div class="card-body p-4 d-flex flex-column justify-content-center text-center">
                        <div class="mb-3"><i class="fas fa-quote-left fa-2x text-muted opacity-25"></i></div>
                        <h5 class="fw-bold text-dark mb-2">Quote of the Day</h5>
                        <p class="text-muted small fst-italic">
                            "Menanam kebun berarti percaya pada hari esok."
                        </p>
                        <small class="fw-bold text-success">- Audrey Hepburn</small>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- JAVASCRIPT: SAPAAN WAKTU & QUOTES -->
    <th:block layout:fragment="others-js">
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Sapaan Waktu
                const hour = new Date().getHours();
                const greetingEl = document.getElementById('greetingTime');
                let greeting = "Halo";

                if (hour >= 5 && hour < 11) greeting = "Selamat Pagi";
                else if (hour >= 11 && hour < 15) greeting = "Selamat Siang";
                else if (hour >= 15 && hour < 19) greeting = "Selamat Sore";
                else greeting = "Selamat Malam";

                greetingEl.textContent = greeting;

                // Random Quote Header
                const quotes = [
                    "Siap merawat kehidupan hari ini?",
                    "Tanaman bahagia, pemilik bahagia.",
                    "Satu sentuhan hijau untuk hari yang lebih baik.",
                    "Mari buat dunia lebih hijau, satu pot setiap hari."
                ];
                document.getElementById('dailyQuote').textContent = quotes[Math.floor(Math.random() * quotes.length)];
            });
        </script>
    </th:block>

    <!-- CSS STYLING -->
    <th:block layout:fragment="others-css">
        <style>
            .fade-in { animation: fadeInUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; opacity: 0; transform: translateY(20px); }
            @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }
            
            .text-shadow { text-shadow: 0 2px 10px rgba(0,0,0,0.15); }
            .drop-shadow { filter: drop-shadow(0 4px 6px rgba(0,0,0,0.2)); }
            .letter-spacing-1 { letter-spacing: 1px; }
            
            /* Glassmorphism Card for Creator */
            .glass-card {
                background: rgba(255, 255, 255, 0.15);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.3);
                border-radius: 20px;
                min-width: 220px;
            }

            .icon-box { width: 60px; height: 60px; border-radius: 18px; display: flex; align-items: center; justify-content: center; transition: transform 0.3s ease; }
            
            .hover-lift { transition: all 0.3s ease; }
            .hover-lift:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.08) !important; }
            .hover-lift:hover .icon-box { transform: scale(1.15) rotate(5deg); }
            
            .hover-scale { transition: transform 0.2s; }
            .hover-scale:hover { transform: scale(1.05); }
            
            .progress-bar { transition: width 1.5s ease-in-out; }
        </style>
    </th:block>

</body>
</html>