<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" layout:decorate="~{layouts/base}">
<head><title>Jadwal Kegiatan</title></head>
<body>
<div layout:fragment="content">
    
    <div class="row mb-4 align-items-center fade-in">
        <div class="col-md-8">
            <h2 class="fw-bold text-info"><i class="fas fa-calendar-alt me-2"></i>Jadwal Kegiatan</h2>
            <p class="text-muted">Daftar kegiatan perawatan tanamanmu.</p>
        </div>
        <div class="col-md-4 text-end">
            <a th:href="@{/schedule/new}" class="btn btn-info rounded-pill px-4 shadow-sm text-white">
                <i class="fas fa-plus me-2"></i>Tambah Jadwal
            </a>
        </div>
    </div>

    <!-- Tampilan Daftar Data -->
    <div class="row g-3">
        <!-- Loop Data dari Database -->
        <div class="col-12 fade-in" th:each="schedule : ${scheduleList}">
            <div class="card border-0 shadow-sm rounded-4 p-3 border-start border-4 border-info position-relative">
                
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <span class="badge bg-info-subtle text-info rounded-pill px-3" th:text="${schedule.date}">Tanggal</span>
                        <h5 class="fw-bold text-dark mt-2 mb-0" th:text="${schedule.plantName}">Nama Tanaman</h5>
                        <p class="text-muted small mb-0" th:text="${schedule.activity}">Aktivitas</p>
                    </div>
                </div>

                <!-- TOMBOL AKSI -->
                <div class="position-absolute top-50 end-0 translate-middle-y me-3">
                    <div class="btn-group">
                        <!-- PERBAIKAN PENTING: Gunakan schedule.id (bukan stat.index) -->
                        <a th:href="@{/schedule/{id}/edit(id=${schedule.id})}" class="btn btn-sm btn-outline-warning" title="Edit"><i class="fas fa-edit"></i></a>
                        <a th:href="@{/schedule/{id}/delete(id=${schedule.id})}" class="btn btn-sm btn-outline-danger ms-2" onclick="return confirm('Yakin hapus?')" title="Hapus"><i class="fas fa-trash"></i></a>
                    </div>
                </div>

            </div>
        </div>
    </div>
    
    <!-- Pesan Jika Data Kosong -->
    <div class="row" th:if="${#lists.isEmpty(scheduleList)}">
        <div class="col-12 text-center py-5">
            <i class="fas fa-clipboard-list fa-3x text-muted mb-3"></i>
            <p class="text-muted">Belum ada jadwal tersimpan. Ayo tambah sekarang!</p>
        </div>
    </div>

</div>
</body>
</html>